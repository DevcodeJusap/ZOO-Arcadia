<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="X-Frame-Options" content="DENY">
    <meta http-equiv="Strict-Transport-Security" content="max-age=31536000; includeSubDomains">    <link rel="icon" type="" href="image/presentation/logo.png">
    <title>Jungle</title>
    <link rel="stylesheet" href="css/savane-marais-jungle.css"/>
    <link rel="stylesheet" href="css/likes.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" />
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body id="jungle.html">
    <header>
        <a href="index.html" id="logo-link">
            <img src="image/presentation/logo.png" alt="Logo Zoo-Arcadia" id="logo">
        </a>
        <nav>
            <ul class="centered">
                <li><button class="btn-headers accueil-btn" id="accueil-btn" onclick="location.href='index.html'">Accueil</button><div class="box"></div></li> 
                <li><button class="btn-headers service-btn" id="service-btn" onclick="location.href='service.html'">Service</button></li> <span></span>
                <li><button class="btn-headers habitat-btn" id="habitat-btn" onclick="location.href='habitat.html'">Habitat</button></li> <span></span>
                <li><button class="btn-headers contact-btn" id="contact-btn" onclick="location.href='contact.html'">Contact</button></li> <span></span>
            </ul>
            <button class="btn-headers login-btn" id="login-btn" onclick="location.href='login.html'" style="float: right;">login</button> <span></span>
        </nav>
    </header>
    <main>
        <h1>La jungle</h1>
        <p class="bienvenue">Bienvenue dans la savane d'Afrique, un écosystème riche et varié où les animaux sauvages règnent en maîtres.</p> <br>
        <section class="savane">
            <div class="cartes-conteneur">
                <div class="card">
                    <div class="front">
                        <img src="image/jungle/animal-2475743_1280.webp" alt="Image de la savane">
                    </div>
                    <div class="back">
                        <p id="animal_name_12">Nom : </p>
                        <p id="species_12">Espèce : </p>
                        <p id="age_12">Âge : </p>
                        <p id="weight_12">Poids : </p>
                        <p id="food_12">Nourriture : </p>
                        <p id="last_meal_12">Dernier repas : </p>
                        <p id="food_quantity_12">Quantité de nourriture : </p>
                        <div>
                            <div class="likes-container"><br>
                                <button class="heart-btn" id="heart-12" onclick="likeAnimal(12)" title="Like animal 12"><i class="fas fa-heart"></i></button>
                                <span id="likes-12" class="likes-counter" data-animal-id="12">0</span> likes
                            </div>
                        </div>
                    </div>
                </div>
            <div class="card">
                <div class="front">
                    <img src="image/jungle/friendly-three-4602625_1280.webp" alt="Image de la savane">
                </div>
                <div class="back">
                    <p id="animal_name_13">Nom : </p>
                    <p id="species_13">Espèce : </p>
                    <p id="age_13">Âge : </p>
                    <p id="weight_13">Poids : </p>
                    <p id="food_13">Nourriture : </p>
                    <p id="last_meal_13">Dernier repas : </p>
                    <p id="food_quantity_13">Quantité de nourriture : </p>
                    <div>
                        <div class="likes-container"><br>
                            <button class="heart-btn" id="heart-13" onclick="likeAnimal(13)" title="Like animal 13"><i class="fas fa-heart"></i></button>
                            <span id="likes-13" class="likes-counter" data-animal-id="13">0</span> likes
                        </div>
                    </div>
                </div>
            </div>
            <div class="card">
                <div class="front">
                    <img src="image/jungle/macaw-320006_1280.webp" alt="Image de la savane">
                </div>
                <div class="back">
                    <p id="animal_name_14">Nom : </p>
                    <p id="species_14">Espèce : </p>
                    <p id="age_14">Âge : </p>
                    <p id="weight_14">Poids : </p>
                    <p id="food_14">Nourriture : </p>
                    <p id="last_meal_14">Dernier repas : </p>
                    <p id="food_quantity_14">Quantité de nourriture : </p>
                    <div>
                        <div class="likes-container"><br>
                            <button class="heart-btn" id="heart-14" onclick="likeAnimal(14)" title="Like animal 14"><i class="fas fa-heart"></i></button>
                            <span id="likes-14" class="likes-counter" data-animal-id="14">0</span> likes
                        </div>
                    </div>
                </div>
            </div>
            <div class="card">
                <div class="front">
                    <img src="image/jungle/orangutan-8665012_1280.webp" alt="Image de la savane">
                </div>
                <div class="back">
                    <p id="animal_name_15">Nom : </p>
                    <p id="species_15">Espèce : </p>
                    <p id="age_15">Âge : </p>
                    <p id="weight_15">Poids : </p>
                    <p id="food_15">Nourriture : </p>
                    <p id="last_meal_15">Dernier repas : </p>
                    <p id="food_quantity_15">Quantité de nourriture : </p>
                    <div>
                        <div class="likes-container"><br>
                            <button class="heart-btn" id="heart-15" onclick="likeAnimal(15)" title="Like animal 15"><i class="fas fa-heart"></i></button>
                            <span id="likes-15" class="likes-counter" data-animal-id="15">0</span> likes
                        </div>
                    </div>
                </div>
            </div>
            <div class="card">
                <div class="front">
                    <img src="image/jungle/animal-4647160_1280.webp" alt="Image de la savane">
                </div>
                <div class="back">
                    <p id="animal_name_16">Nom : </p>
                    <p id="species_16">Espèce : </p>
                    <p id="age_16">Âge : </p>
                    <p id="weight_16">Poids : </p>
                    <p id="food_16">Nourriture : </p>
                    <p id="last_meal_16">Dernier repas : </p>
                    <p id="food_quantity_16">Quantité de nourriture : </p>
                    <div>
                        <div class="likes-container"><br>
                            <button class="heart-btn" id="heart-16" onclick="likeAnimal(16)" title="Like animal 16"><i class="fas fa-heart"></i></button>
                            <span id="likes-16" class="likes-counter" data-animal-id="16">0</span> likes
                        </div>
                    </div>
                </div>
            </div>
            <div class="card">
                <div class="front">
                    <img src="image/jungle/animal-6930449_1280.webp" alt="Image de la savane">
                </div>
                <div class="back">
                    <p id="animal_name_17">Nom : </p>
                    <p id="species_17">Espèce : </p>
                    <p id="age_17">Âge : </p>
                    <p id="weight_17">Poids : </p>
                    <p id="food_17">Nourriture : </p>
                    <p id="last_meal_17">Dernier repas : </p>
                    <p id="food_quantity_17">Quantité de nourriture : </p>
                    <div>
                        <div class="likes-container"><br>
                            <button class="heart-btn" id="heart-17" onclick="likeAnimal(17)" title="Like animal 17"><i class="fas fa-heart"></i></button>
                            <span id="likes-17" class="likes-counter" data-animal-id="17">0</span> likes
                        </div>
                    </div>
                </div>
            </div>
            <div class="card">
                <div class="front">
                    <img src="image/jungle/animal-8353578_1280.webp" alt="Image de la savane">
                </div>
                <div class="back">
                    <p id="animal_name_18">Nom : </p>
                    <p id="species_18">Espèce : </p>
                    <p id="age_18">Âge : </p>
                    <p id="weight_18">Poids : </p>
                    <p id="food_18">Nourriture : </p>
                    <p id="last_meal_18">Dernier repas : </p>
                    <p id="food_quantity_18">Quantité de nourriture : </p>
                    <div>
                        <div class="likes-container"><br>
                            <button class="heart-btn" id="heart-18" onclick="likeAnimal(18)" title="Like animal 18"><i class="fas fa-heart"></i></button>
                            <span id="likes-18" class="likes-counter" data-animal-id="18">0</span> likes
                        </div>
                    </div>
                </div>
            </div>
            <div class="card">
                <div class="front">
                    <img src="image/jungle/animal-world-4889809_1280.webp" alt="Image de la savane">
                </div>
                <div class="back">
                    <p id="animal_name_19">Nom : </p>
                    <p id="species_19">Espèce : </p>
                    <p id="age_19">Âge : </p>
                    <p id="weight_19">Poids : </p>
                    <p id="food_19">Nourriture : </p>
                    <p id="last_meal_19">Dernier repas : </p>
                    <p id="food_quantity_19">Quantité de nourriture : </p>
                    <div>
                        <div class="likes-container"><br>
                            <button class="heart-btn" id="heart-19" onclick="likeAnimal(19)" title="Like animal 19"><i class="fas fa-heart"></i></button>
                            <span id="likes-19" class="likes-counter" data-animal-id="19">0</span> likes
                        </div>
                    </div>
                </div>
            </div>
            <div class="card">
                <div class="front">
                    <img src="image/jungle/ape-17474_1280.webp" alt="Image de la savane">
                </div>
                <div class="back">
                    <p id="animal_name_20">Nom : </p>
                    <p id="species_20">Espèce : </p>
                    <p id="age_20">Âge : </p>
                    <p id="weight_20">Poids : </p>
                    <p id="food_20">Nourriture : </p>
                    <p id="last_meal_20">Dernier repas : </p>
                    <p id="food_quantity_20">Quantité de nourriture : </p>
                    <div>
                        <div class="likes-container"><br>
                            <button class="heart-btn" id="heart-20" onclick="likeAnimal(20)" title="Like animal 20"><i class="fas fa-heart"></i></button>
                            <span id="likes-20" class="likes-counter" data-animal-id="20">0</span> likes
                        </div>
                    </div>
                </div>
            </div>
            <div class="card">
                <div class="front">
                    <img src="image/jungle/bird-406776_1280.webp" alt="Image de la savane">
                </div>
                <div class="back">
                    <p id="animal_name_21">Nom : </p>
                    <p id="species_21">Espèce : </p>
                    <p id="age_21">Âge : </p>
                    <p id="weight_21">Poids : </p>
                    <p id="food_21">Nourriture : </p>
                    <p id="last_meal_21">Dernier repas : </p>
                    <p id="food_quantity_21">Quantité de nourriture : </p>
                    <div>
                        <div class="likes-container"><br>
                            <button class="heart-btn" id="heart-21" onclick="likeAnimal(21)" title="Like animal 21"><i class="fas fa-heart"></i></button>
                            <span id="likes-21" class="likes-counter" data-animal-id="21">0</span> likes
                        </div>
                    </div>
                </div>
            </div>
            <div class="card">
                <div class="front">
                    <img src="image/jungle/Design sans titre (12).webp" alt="Image de la savane">
                </div>
                <div class="back">
                    <p id="animal_name_22">Nom : </p>
                    <p id="species_22">Espèce : </p>
                    <p id="age_22">Âge : </p>
                    <p id="weight_22">Poids : </p>
                    <p id="food_22">Nourriture : </p>
                    <p id="last_meal_22">Dernier repas : </p>
                    <p id="food_quantity_22">Quantité de nourriture : </p>
                    <div>
                        <div class="likes-container"><br>
                            <button class="heart-btn" id="heart-22" aria-label="Like animal 22"><i class="fas fa-heart"></i></button>
                            <span id="likes-22" class="likes-counter" data-animal-id="22">0</span> likes
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>
    <div style="text-align: center; margin-top: 20px;">
        <a href="habitat.html" class="btn retour">Retour</a>
    </div>
        <script>    
        
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM entièrement chargé et analysé');
            fetchAnimalData();
        });
    
        function fetchAnimalData() {
            console.log('Appel à fetchAnimalData');
            fetch('http://localhost:3000/animal')
                .then(response => {
                    console.log('Réponse reçue du serveur');
                    return response.json();
                })
                
                .then(data => {
                    console.log('Données reçues:', data);
                    data.forEach((animal) => {
                        const cardIndex = animal.id;
                        console.log(`Mise à jour de la carte ${cardIndex}`);
                        const animalNameElement = document.getElementById(`animal_name_${cardIndex}`);
                        const speciesElement = document.getElementById(`species_${cardIndex}`);
                        const ageElement = document.getElementById(`age_${cardIndex}`);
                        const weightElement = document.getElementById(`weight_${cardIndex}`);
                        const foodElement = document.getElementById(`food_${cardIndex}`);
                        const lastMealElement = document.getElementById(`last_meal_${cardIndex}`);
                        const foodQuantityElement = document.getElementById(`food_quantity_${cardIndex}`);
                        
    
                        if (animalNameElement && speciesElement && ageElement && weightElement && foodElement && lastMealElement && foodQuantityElement) {
                            animalNameElement.innerText = `Nom : ${animal.animal_name}`;
                            speciesElement.innerText = `Espèce : ${animal.species}`;
                            ageElement.innerText = `Âge : ${animal.age}`;
                            weightElement.innerText = `Poids : ${animal.weight}`;
                            foodElement.innerText = `Nourriture : ${animal.food}`;
                            lastMealElement.innerText = `Dernier repas : ${animal.last_meal}`;
                            foodQuantityElement.innerText = `Quantité de nourriture : ${animal.food_quantity}`;
                        } else {
                            
                        }
                    });
                })
                .catch(error => {
                    console.error('Erreur lors de la récupération des données:', error);
                });
        }

        
        function likeAnimal(animalId) {
            console.log(`Animal ${animalId} liked!`);
            const likesCounter = document.getElementById(`likes-${animalId}`);
            if (likesCounter) {
                let currentLikes = parseInt(likesCounter.textContent, 10);
                likesCounter.textContent = currentLikes + 1;
                console.log(`Likes updated for animal ${animalId}: ${currentLikes + 1}`);
                
                fetch('like_animal.php', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded'
                    },
                    body: `action=like&animal_id=${animalId}`
                })
                .then(response => response.text())
                .then(data => {
                    console.log(`Réponse du serveur pour l'animal ${animalId}: ${data}`);
                })
                .catch(error => {
                    console.error('Erreur réseau:', error);
                });
            } else {
                console.error(`Compteur de likes non trouvé pour l'animal ${animalId}`);
            }
        }
    </script>
    <footer>
        <div class="container">
            <div class="row">
                <div class="col-md-4 col-sm-4 col-xs-12">
                <h3 class="text-uppercase">À propos de nous</h3>
                    <p class="text-muted">Zoo-Arcadia est un parc zoologique situé en Bretagne, près de la forêt de Brocéliande. Nous sommes dédiés à la conservation de la biodiversité et au bien-être animal.</p>
                <br><h3 class="text-uppercase">Horaires d'ouverture</h3>
                <p class="text-muted">Du Mardi au  Dimanche de 9h à 18h30</p>
                <p class="text-muted">Ainsi que les jours fériers</p>
                </div>
                <div class="col-md-4 col-sm-4 col-xs-12">
                    <h3 class="text-uppercase">Liens utiles</h3>
                    <ul class="list-unstyled">
                        <li><a href="service.html">Nos services</a></li>
                        <li><a href="habitat.html">Nos habitats</a></li>
                        <li><a href="contact.html">Nous contacter</a></li>
                    </ul>
                </div>
                <div class="col-md-4 col-sm-4 col-xs-12">
                    <h3 class="text-uppercase">Nos coordonnées</h3>
                    <ul class="list-unstyled">
                        <li>Adresse : Zoo-Arcadia, Route de Brocéliande, 35300 Rennes, France</li>
                        <li>Téléphone : 02 99 99 99 99</li>
                        <li>Email : contact@zoo-arcadia.fr</li>
                    </ul>
                </div>
            </div>
            <p class="copyright text-muted">&copy; 2024 Zoo-Arcadia. Tous droits réservés. Créé par <a href="https://codelinky.com">C@deLinky</a></p>
        </div>
    </footer>
</body>
</html>